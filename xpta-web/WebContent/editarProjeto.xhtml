<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	>

<f:view>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Colaboke</title>
<link href="css/template.css" rel="stylesheet" type="text/css" />
</head>	

<body>
<div id="rodape">
<div id="corpo" align="center">

<div id="topo">
<div id="topo_interno">

<div id="logo">
<img src="imagens/colaboke.png"  />
<img src="imagens/topo_texto.png" vspace="40px" hspace="10px" />
</div>

<div id="menu_topo" align="right">
<h:form id="menu_topo"> 
<h:outputLink value="areaUsuario.xpta"><img src="imagens/btn_home.png"/></h:outputLink>
<h:outputLink value="Projetos.xpta"><img src="imagens/btn_projetos.png" /></h:outputLink>
<h:commandButton image="imagens/btn_cadastre.png"  action="#{usuarioB.novoUsuario}" value="Cadastrar usuario" />
</h:form>
</div>

<div id="login_topo">
	<h:form>
	<c:if test="${empty sessionScope.user.nome}">

	<h:outputText value="Usuario:" />
	<h:inputText value="#{usuarioB.login}" /><br />
	<h:outputText value="Senha:" />
	<h:inputSecret value="#{usuarioB.senha}"/><br />
	<h:commandButton action="#{usuarioB.fazerLogin}" value="Enviar" />  

	</c:if>
 
<c:if test="${not empty sessionScope.user.nome}"><br /><br />
 Bem vindo, <h:outputText value="#{sessionScope.user.nome}" />!<br />
 <h:commandButton action="#{usuarioB.fazerLogout}" value="Sair" />
</c:if>

</h:form>

</div>

</div> <!-- fim de topo_interno -->
</div> <!-- fim de topo -->

<div id="principal">

		 <h:form id="uploadForm" enctype="multipart/form-data">
                <h:panelGrid columns="3">
                    <h:outputLabel for="file" value="Select file" />
                    <t:inputFileUpload id="file" value="#{myBean.uploadedFile}" required="true" />
                    <h:message for="file" style="color: red;" />

                    <h:panelGroup />
                    <h:commandButton value="Submit" action="#{myBean.submit}" />
                    <h:message for="uploadForm" infoStyle="color: green;" errorStyle="color: red;" />
                </h:panelGrid>
            </h:form>

            <h:outputLink value="file/#{myBean.fileName}" rendered="#{myBean.fileName != null}">
                Download back
            </h:outputLink>








 <h:form>
        <h:panelGrid columns="2" columnClasses="top,top">
            <rich:fileUpload fileUploadListener="#{fileB.listener}"
                maxFilesQuantity="#{fileB.uploadsAvailable}"
                id="upload"
                immediateUpload="#{fileB.autoUpload}"
                acceptedTypes="jpg, gif, png, bmp" allowFlash="#{fileB.useFlash}">
                <a4j:support event="onuploadcomplete" reRender="info" />
            </rich:fileUpload>
            <h:panelGroup id="info">
                <rich:panel bodyClass="info">
                    <f:facet name="header">
                        <h:outputText value="Uploaded Files Info" />
                    </f:facet>
                    <h:outputText value="No files currently uploaded"
                        rendered="#{fileB.size==0}" />
                    <rich:dataGrid columns="1" value="#{fileB.files}"
                        var="file" rowKeyVar="row">
                        <rich:panel bodyClass="rich-laguna-panel-no-header">
                            <h:panelGrid columns="2">
                                <a4j:mediaOutput element="img" mimeType="#{file.mime}"
                                    createContent="#{fileB.paint}" value="#{row}"
                                    style="width:100px; height:100px;" cacheable="false">
                                    <f:param value="#{fileB.timeStamp}" name="time"/>  
                                </a4j:mediaOutput>
                                <h:panelGrid columns="2">
                                    <h:outputText value="File Name:" />
                                    <h:outputText value="#{file.name}" />
                                    <h:outputText value="File Length(bytes):" />
                                    <h:outputText value="#{file.length}" />
                                </h:panelGrid>
                            </h:panelGrid>
                        </rich:panel>
                    </rich:dataGrid>
                </rich:panel>
                <rich:spacer height="3"/>
                <br />
                <a4j:commandButton action="#{fileB.clearUploadData}"
                    reRender="info, upload" value="Clear Uploaded Data"
                    rendered="#{fileB.size>0}" />
            </h:panelGroup>
        </h:panelGrid>
    </h:form>
















    <rich:modalPanel id="panel" width="600" height="300">
        <f:facet name="header">
            <h:panelGroup>
                <h:outputText value="Adicionar arquivo"></h:outputText>
            </h:panelGroup>
        </f:facet>
        <a4j:form>
        <rich:fileUpload locale="/projetos" fileUploadListener="#{fileB.listener}"
                maxFilesQuantity="#{fileB.uploadsAvailable}"
                id="uploadFiles"
                immediateUpload="#{fileB.autoUpload}"
                acceptedTypes="mp3" allowFlash="#{fileB.useFlash}">
                <a4j:support event="onuploadcomplete" reRender="info" />
            </rich:fileUpload>
       	</a4j:form>
        <f:facet name="controls">
            <h:panelGroup>
                <h:graphicImage value="/images/modal/close.png" />
                <rich:componentControl for="panel" attachTo="hidelink" operation="hide" event="onclick"/>
            </h:panelGroup>
        </f:facet>
        
    </rich:modalPanel>
    <h:outputLink value="#" id="link">
        Adicionar Track 
        <rich:componentControl for="panel" attachTo="link" operation="show" event="onclick"/>
    </h:outputLink>
    <br></br>
    <br></br>
    <h:outputLink value="/areaUsuario.xpta"> Voltar </h:outputLink>







<div class="clear"></div>
</div> <!-- fim de principal -->

<div id="patrocinios">
</div>
</div> <!-- fim de corpo -->
<div class="clear"></div>
</div> <!-- fim de rodape -->
	
	</body>
		
</f:view>
</html>